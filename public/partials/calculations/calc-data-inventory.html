<div ng-controller="CalcController" class="inventory-holder">
  <h1 class="heading">Manage Calculations</h1>
  <select ng-change="inventoryChanged()" ng-model="selectedInventory">
    <option ng-repeat="inventory in inventories" value="{{inventory._id}}">{{inventory.in_inventory_desc}} ({{inventory.in_start_date | date:'longDate'}} - {{inventory.in_end_date | date: 'longDate'}})</option>
  </select>
  <select ng-change="sectorChanged()" ng-model="selectedSector">
    <option ng-repeat="sector in sectors" value="{{sector._id}}">{{sector.se_name}}</option>
  </select>
  <div class="horizline"></div>

  <div ng-show="isAvailable">
    <a class="smaller add-category-button w-inline-block" data-ix="add-category-modal" ng-click="getAllEF(selectedInventory, selectedSector)">
      <div>Load Emission Factors</div>
    </a>
  </div>
  <br />

  <div ui-tree data-drag-enabled="false" data-nodrop-enabled="false">
    <ol ui-tree-nodes="" ng-model="activity_data">
      <li ng-repeat="item in activity_data" ui-tree-node>
        <div layout="row" ui-tree-handle>
          <span flex>AD ({{item.ca_category.ca_code_name}}) - {{item.da_date | date: 'yyyy'}}</span>
          <span flex>{{item.da_data_value | number}} {{item.un_unit.un_unit_symbol}}</span>
        </div>
        <ol ui-tree-nodes="" ng-model="matches">
          <li ng-repeat="subItem in getAssociatedInfo(item, emission_factors)" ui-tree-node>
            <div class="subitem" ui-tree-handle>
              {{subItem.ac_activity.ac_name}} - {{subItem.ca_category.ca_code_name}} - {{subItem.ga_gas.ga_gas_name}}
            </div>
          </li>
        </ol>
      </li>
    </ol>
  </div>

</div>